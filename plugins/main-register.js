import { createHash } from 'crypto'

let Reg = /\|?(.*)([.|] *?)([0-9]*)$/i
let handler = async function (m, { text, usedPrefix }) {
  let user = global.db.data.users[m.sender]
  if (user.registered === true) throw `Ø£Ù†Øª Ù…Ø³Ø¬Ù‘Ù„ Ø¨Ø§Ù„ÙØ¹Ù„\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŸ ${usedPrefix}Ø´Ø·Ø¨ <Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ>\n\nâ€¢ Ù„Ø¹Ø±Ø¶ Ø±Ù‚Ù…Ùƒ Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ø±Ø³Ù„ Ø§Ù„Ø£Ù…Ø± : *.ØªØ³Ø¬ÙŠÙ„ÙŠ*`
  if (!Reg.test(text)) throw `âŒ ØµÙŠØºØ© Ø®Ø§Ø·Ø¦Ø©\n*${usedPrefix}ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ø³Ù….Ø§Ù„Ø¹Ù…Ø±*\nÙ…Ù„Ø§Ø­Ø¸Ø© : ÙŠØ¬Ø¨ ÙˆØ¶Ø¹ Ù†Ù‚Ø·Ø© Ù…Ø§Ø¨ÙŠÙ† Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø¹Ù…Ø± Ø¯ÙˆÙ† ØªØ±Ùƒ Ù…Ø³Ø§ÙØ§Øª`
  let [_, name, splitter, age] = text.match(Reg)
  if (!name) throw 'âŒ Ø§Ù„Ø§Ø³Ù… Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† ÙØ§Ø±ØºØ§Ù‹ (Ø£Ø­Ø±Ù ÙˆØ£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)'
  if (!age) throw 'âŒ Ø§Ù„Ø¹Ù…Ø± Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† ÙØ§Ø±ØºØ§Ù‹ (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)'
  age = parseInt(age)
  if (age > 120) throw 'âŒ Ø§Ù„Ø¹Ù…Ø± ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ ğŸ˜‚'
  if (age < 15) throw 'âŒ Ø§Ù„Ø£Ø¹Ù…Ø§Ø± ØªØ­Øª 15 Ø³Ù†Ø© ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­Ø© ğŸ˜‚'
  user.name = name.trim()
  user.age = age
  user.regTime = + new Date
  user.registered = true
  let sn = createHash('md5').update(m.sender).digest('hex')
  m.reply(`
âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!

â•­â”€ã€Œ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ã€
â”‚ Ø§Ù„Ø§Ø³Ù…: ${name}
â”‚ Ø§Ù„Ø¹Ù…Ø±: ${age} Ø³Ù†Ø©
â•°â”€â”€â”€â”€
Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ: 
${sn}

*Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (TOS) - Yato Bot - MD*
Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„Ø¨ÙˆØª Yato Bot - MD ÙØ£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„ØªØ§Ù„ÙŠØ©:

1. *Ù…Ù…Ù†ÙˆØ¹ Ù…Ù†Ø¹Ø§Ù‹ Ø¨Ø§ØªØ§Ù‹ Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ù…Ø¤Ù‚Øª/Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø¤Ù‚ØªØ©*  
Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¨ÙˆØª Ø¨Ø­Ø¸Ø± Ø±Ù‚Ù…Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŒ ÙˆÙ„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ± (+967781994494).

2. *Ù…Ù…Ù†ÙˆØ¹ Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ù„Ø§Ø¦Ù‚ (NSFW)*  
Ø§Ù„Ø¨ÙˆØª ÙŠÙƒØªØ´Ù Ø§Ù„ÙˆØ³Ø§Ø¦Ø· ØºÙŠØ± Ø§Ù„Ù„Ø§Ø¦Ù‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø¨Ø­Ø¸Ø± Ø±Ù‚Ù…ÙƒØŒ Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø± ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ± (+967781994494).

3. *Ù…Ù…Ù†ÙˆØ¹ Ø¥Ø±Ø³Ø§Ù„ Ø³Ø¨Ø§Ù… (Ø¥Ø²Ø¹Ø§Ø¬) Ù„Ø±Ù‚Ù… Ø§Ù„Ø¨ÙˆØª*  
Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¨ÙˆØª Ø¨Ø¹Ù…Ù„ Ø­Ø¸Ø± Ø¯Ø§Ø¦Ù… Ø¥Ø°Ø§ Ø§ÙƒØªØ´Ù Ù†Ø´Ø§Ø· Ø³Ø¨Ø§Ù… Ø¹Ù„Ù‰ Ø±Ù‚Ù…Ùƒ.

4. *ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø·ÙˆØ± Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© ÙÙ‚Ø·*  
Ù„Ø§ ÙØ§Ø¦Ø¯Ø© Ù…Ù† Ù…Ø±Ø§Ø³Ù„Ø© Ø±Ù‚Ù… Ø§Ù„Ø¨ÙˆØªØŒ Ù„Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆØ§Ù„Ù…Ø·ÙˆØ± Ù„Ù† ÙŠØ±Ø§Ù‡Ø§.

Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„Ø¨ÙˆØª Yato Bot - MDØŒ ÙØ£Ù†Øª ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· Ø£Ø¹Ù„Ø§Ù‡.

*Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· ÙƒØ§Ù† Ø¨ØªØ§Ø±ÙŠØ® 12 Ù…Ø§ÙŠÙˆ 2024.*

ğŸ“Œ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙŠØ¹Ù†ÙŠ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·
`.trim())
}

handler.tags = ['main']
handler.help = ['ØªØ³Ø¬ÙŠÙ„'] // .map(v => v + ' <Ø§Ù„Ø§Ø³Ù…>.<Ø§Ù„Ø¹Ù…Ø±>')
handler.command = /^(Ø³Ø¬Ù„|ØªØ³Ø¬ÙŠÙ„|daftar|reg(ister)?)$/i

export default handler